import{i as gt}from"./_isme_icons-CUZYZBf_.js";import{_ as bt,f as yt,a as wt,u as St,b as _t}from"./useForm-CG-yDGX1.js";import{bF as xt,j as k,l as I,bc as Rt,aB as Ae,bm as kt,bG as Ct,bH as Tt,bI as Pt,bo as Ot,e as It,f as ue,h as _,q as Nt,bb as Ft,bE as te,aT as Et,aV as Oe,an as Ie,av as Kt,u as Ue,aU as de,o as Mt,p as je,t as le,n as Bt,at as $t,bJ as At,aD as Ne,bs as Ut,a as jt,c as ve,b as he,a6 as Dt,a7 as Vt,a8 as Lt,a9 as Gt,aa as be,ab as zt,ac as qt,ad as Wt,au as Fe,s as Ht,ae as Qt,ag as me,g as De,k as Xt,ai as Jt,ak as z,aj as Yt,bK as Zt,b5 as ae,bL as en,a$ as tn,z as q,A as W,B as m,I as y,aG as X,D as v,E as Z,b1 as nn}from"./index-DrZMjmv9.js";import V from"./QuestionLabel-Cr5WASll.js";import{_ as an,c as on,u as ln,t as rn,a as sn}from"./Tree-DNLilPF-.js";import{N as dn,_ as un,F as cn,u as fn,a as pn}from"./Select-B6wqMYzm.js";import{u as vn}from"./Eye-CJXJszYF.js";import{c as hn,h as Ee}from"./create-BGkfZJ4H.js";import{N as mn}from"./Switch-C3KDMXR3.js";import{_ as gn}from"./Input-AGQs7Bn2.js";import{_ as bn}from"./InputNumber-Dbw5Qrtk.js";function yn(e){if(typeof e=="number")return{"":e.toString()};const s={};return e.split(/ +/).forEach(l=>{if(l==="")return;const[r,a]=l.split(":");a===void 0?s[""]=r:s[r]=a}),s}function ee(e,s){var l;if(e==null)return;const r=yn(e);if(s===void 0)return r[""];if(typeof s=="string")return(l=r[s])!==null&&l!==void 0?l:r[""];if(Array.isArray(s)){for(let a=s.length-1;a>=0;--a){const u=s[a];if(u in r)return r[u]}return r[""]}else{let a,u=-1;return Object.keys(r).forEach(h=>{const f=Number(h);!Number.isNaN(f)&&s>=f&&f>=u&&(u=f,a=r[h])}),a}}const wn={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function Sn(e){return`(min-width: ${e}px)`}const oe={};function _n(e=wn){if(!xt)return k(()=>[]);if(typeof window.matchMedia!="function")return k(()=>[]);const s=I({}),l=Object.keys(e),r=(a,u)=>{a.matches?s.value[u]=!0:s.value[u]=!1};return l.forEach(a=>{const u=e[a];let h,f;oe[u]===void 0?(h=window.matchMedia(Sn(u)),h.addEventListener?h.addEventListener("change",R=>{f.forEach(g=>{g(R,a)})}):h.addListener&&h.addListener(R=>{f.forEach(g=>{g(R,a)})}),f=new Set,oe[u]={mql:h,cbs:f}):(h=oe[u].mql,f=oe[u].cbs),f.add(r),h.matches&&f.forEach(R=>{R(h,a)})}),Rt(()=>{l.forEach(a=>{const{cbs:u}=oe[e[a]];u.has(r)&&u.delete(r)})}),k(()=>{const{value:a}=s;return l.filter(u=>a[u])})}function xn(e){var s;const l=(s=e.dirs)===null||s===void 0?void 0:s.find(({dir:r})=>r===Ae);return!!(l&&l.value===!1)}function Rn(e){const{popoverColor:s,boxShadow2:l,borderRadius:r,heightMedium:a,dividerColor:u,textColor2:h}=e;return{menuPadding:"4px",menuColor:s,menuBoxShadow:l,menuBorderRadius:r,menuHeight:`calc(${a} * 7.6)`,actionDividerColor:u,actionTextColor:h,actionPadding:"8px 12px",headerDividerColor:u,headerTextColor:h,headerPadding:"8px 12px"}}const kn=kt({name:"TreeSelect",common:Ot,peers:{Tree:Pt,Empty:Tt,InternalSelection:Ct},self:Rn}),Ke=1,Ve=It("n-grid"),Le=1,ye={span:{type:[Number,String],default:Le},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},Cn=Et(ye),Tn=ue({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:ye,setup(){const{isSsrRef:e,xGapRef:s,itemStyleRef:l,overflowRef:r,layoutShiftDisabledRef:a}=Nt(Ve),u=Ft();return{overflow:r,itemStyle:l,layoutShiftDisabled:a,mergedXGap:k(()=>te(s.value||0)),deriveStyle:()=>{e.value;const{privateSpan:h=Le,privateShow:f=!0,privateColStart:R=void 0,privateOffset:g=0}=u.vnode.props,{value:K}=s,A=te(K||0);return{display:f?"":"none",gridColumn:`${R??`span ${h}`} / span ${h}`,marginLeft:g?`calc((100% - (${h} - 1) * ${A}) / ${h} * ${g} + ${A} * ${g})`:""}}}},render(){var e,s;if(this.layoutShiftDisabled){const{span:l,offset:r,mergedXGap:a}=this;return _("div",{style:{gridColumn:`span ${l} / span ${l}`,marginLeft:r?`calc((100% - (${l} - 1) * ${a}) / ${l} * ${r} + ${a} * ${r})`:""}},this.$slots)}return _("div",{style:[this.itemStyle,this.deriveStyle()]},(s=(e=this.$slots).default)===null||s===void 0?void 0:s.call(e,{overflow:this.overflow}))}}),Pn=Object.assign(Object.assign({},ye),wt),On=ue({__GRID_ITEM__:!0,name:"FormItemGridItem",alias:["FormItemGi"],props:Pn,setup(){const e=I(null);return{formItemInstRef:e,validate:(...r)=>{const{value:a}=e;if(a)return a.validate(...r)},restoreValidation:()=>{const{value:r}=e;r&&r.restoreValidation()}}},render(){return _(Tn,Oe(this.$.vnode.props||{},Cn),{default:()=>{const e=Oe(this.$props,yt);return _(bt,Object.assign({ref:"formItemInstRef"},e),this.$slots)}})}}),In={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},Ge=24,ge="__ssr__",Nn={layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:Ge},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},Fn=ue({name:"Grid",inheritAttrs:!1,props:Nn,setup(e){const{mergedClsPrefixRef:s,mergedBreakpointsRef:l}=Ue(e),r=/^\d+$/,a=I(void 0),u=_n(l?.value||In),h=de(()=>!!(e.itemResponsive||!r.test(e.cols.toString())||!r.test(e.xGap.toString())||!r.test(e.yGap.toString()))),f=k(()=>{if(h.value)return e.responsive==="self"?a.value:u.value}),R=de(()=>{var x;return(x=Number(ee(e.cols.toString(),f.value)))!==null&&x!==void 0?x:Ge}),g=de(()=>ee(e.xGap.toString(),f.value)),K=de(()=>ee(e.yGap.toString(),f.value)),A=x=>{a.value=x.contentRect.width},i=x=>{Ut(A,x)},U=I(!1),M=k(()=>{if(e.responsive==="self")return i}),P=I(!1),N=I();return Mt(()=>{const{value:x}=N;x&&x.hasAttribute(ge)&&(x.removeAttribute(ge),P.value=!0)}),je(Ve,{layoutShiftDisabledRef:le(e,"layoutShiftDisabled"),isSsrRef:P,itemStyleRef:le(e,"itemStyle"),xGapRef:g,overflowRef:U}),{isSsr:!Bt,contentEl:N,mergedClsPrefix:s,style:k(()=>e.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${e.cols}, minmax(0, 1fr))`,columnGap:te(e.xGap),rowGap:te(e.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${R.value}, minmax(0, 1fr))`,columnGap:te(g.value),rowGap:te(K.value)}),isResponsive:h,responsiveQuery:f,responsiveCols:R,handleResize:M,overflow:U}},render(){if(this.layoutShiftDisabled)return _("div",Ie({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const e=()=>{var s,l,r,a,u,h,f;this.overflow=!1;const R=$t(At(this)),g=[],{collapsed:K,collapsedRows:A,responsiveCols:i,responsiveQuery:U}=this;R.forEach(p=>{var j,w,o,O,C;if(((j=p?.type)===null||j===void 0?void 0:j.__GRID_ITEM__)!==!0)return;if(xn(p)){const E=Ne(p);E.props?E.props.privateShow=!1:E.props={privateShow:!1},g.push({child:E,rawChildSpan:0});return}p.dirs=((w=p.dirs)===null||w===void 0?void 0:w.filter(({dir:E})=>E!==Ae))||null,((o=p.dirs)===null||o===void 0?void 0:o.length)===0&&(p.dirs=null);const F=Ne(p),B=Number((C=ee((O=F.props)===null||O===void 0?void 0:O.span,U))!==null&&C!==void 0?C:Ke);B!==0&&g.push({child:F,rawChildSpan:B})});let M=0;const P=(s=g[g.length-1])===null||s===void 0?void 0:s.child;if(P?.props){const p=(l=P.props)===null||l===void 0?void 0:l.suffix;p!==void 0&&p!==!1&&(M=Number((a=ee((r=P.props)===null||r===void 0?void 0:r.span,U))!==null&&a!==void 0?a:Ke),P.props.privateSpan=M,P.props.privateColStart=i+1-M,P.props.privateShow=(u=P.props.privateShow)!==null&&u!==void 0?u:!0)}let N=0,x=!1;for(const{child:p,rawChildSpan:j}of g){if(x&&(this.overflow=!0),!x){const w=Number((f=ee((h=p.props)===null||h===void 0?void 0:h.offset,U))!==null&&f!==void 0?f:0),o=Math.min(j+w,i);if(p.props?(p.props.privateSpan=o,p.props.privateOffset=w):p.props={privateSpan:o,privateOffset:w},K){const O=N%i;o+O>i&&(N+=i-O),o+N+M>A*i?x=!0:N+=o}}x&&(p.props?p.props.privateShow!==!0&&(p.props.privateShow=!1):p.props={privateShow:!1})}return _("div",Ie({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[ge]:this.isSsr||void 0},this.$attrs),g.map(({child:p})=>p))};return this.isResponsive&&this.responsive==="self"?_(Kt,{onResize:this.handleResize},{default:e}):e()}}),En=jt([ve("tree-select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),ve("tree-select-menu",`
 position: relative;
 overflow: hidden;
 margin: 4px 0;
 transition: box-shadow .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-menu-border-radius);
 box-shadow: var(--n-menu-box-shadow);
 background-color: var(--n-menu-color);
 outline: none;
 `,[ve("tree","max-height: var(--n-menu-height);"),he("empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),he("header",`
 padding: var(--n-header-padding);
 transition: 
 color .3s var(--n-bezier);
 border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-header-divider-color);
 color: var(--n-header-text-color);
 `),he("action",`
 padding: var(--n-action-padding);
 transition: 
 color .3s var(--n-bezier);
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),Dt()])]);function Me(e,s){const{rawNode:l}=e;return Object.assign(Object.assign({},l),{label:l[s],value:e.key})}function Be(e,s,l,r){const{rawNode:a}=e;return Object.assign(Object.assign({},a),{value:e.key,label:s.map(u=>u.rawNode[r]).join(l)})}const Kn=Object.assign(Object.assign(Object.assign(Object.assign({},De.props),{bordered:{type:Boolean,default:!0},cascade:Boolean,checkable:Boolean,clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},consistentMenuWidth:{type:Boolean,default:!0},defaultShow:Boolean,defaultValue:{type:[String,Number,Array],default:null},disabled:{type:Boolean,default:void 0},filterable:Boolean,checkStrategy:{type:String,default:"all"},loading:Boolean,maxTagCount:[String,Number],multiple:Boolean,showPath:Boolean,separator:{type:String,default:" / "},options:{type:Array,default:()=>[]},placeholder:String,placement:{type:String,default:"bottom-start"},show:{type:Boolean,default:void 0},size:String,value:[String,Number,Array],to:be.propTo,menuProps:Object,virtualScroll:{type:Boolean,default:!0},status:String,renderTag:Function,ellipsisTagPopoverProps:Object}),rn),{renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,watchProps:Array,getChildren:Function,onBlur:Function,onFocus:Function,onLoad:Function,onUpdateShow:[Function,Array],onUpdateValue:[Function,Array],"onUpdate:value":[Function,Array],"onUpdate:show":[Function,Array],leafOnly:Boolean}),Mn=ue({name:"TreeSelect",props:Kn,slots:Object,setup(e){const s=I(null),l=I(null),r=I(null),a=I(null),{mergedClsPrefixRef:u,namespaceRef:h,inlineThemeDisabled:f}=Ue(e),{localeRef:R}=vn("Select"),{mergedSizeRef:g,mergedDisabledRef:K,mergedStatusRef:A,nTriggerFormBlur:i,nTriggerFormChange:U,nTriggerFormFocus:M,nTriggerFormInput:P}=Qt(e),N=I(e.defaultValue),x=le(e,"value"),p=me(x,N),j=I(e.defaultShow),w=le(e,"show"),o=me(w,j),O=I(""),C=k(()=>{const{filter:t}=e;if(t)return t;const{labelField:n}=e;return(c,d)=>c.length?d[n].toLowerCase().includes(c.toLowerCase()):!0}),F=k(()=>hn(e.options,on(e.keyField,e.childrenField,e.disabledField,void 0))),{value:B}=p,E=I(e.checkable?null:Array.isArray(B)&&B.length?B[B.length-1]:null),J=k(()=>e.multiple&&e.cascade&&e.checkable),re=I(e.defaultExpandAll?void 0:e.defaultExpandedKeys||e.expandedKeys),ce=le(e,"expandedKeys"),S=me(ce,re),L=I(!1),ze=k(()=>{const{placeholder:t}=e;return t!==void 0?t:R.value.placeholder}),we=k(()=>{const{value:t}=p;return e.multiple?Array.isArray(t)?t:[]:t===null||Array.isArray(t)?[]:[t]}),qe=k(()=>e.checkable?[]:we.value),We=k(()=>{const{multiple:t,showPath:n,separator:c,labelField:d}=e;if(t)return null;const{value:b}=p;if(!Array.isArray(b)&&b!==null){const{value:T}=F,D=T.getNode(b);if(D!==null)return n?Be(D,T.getPath(b).treeNodePath,c,d):Me(D,d)}return null}),He=k(()=>{const{multiple:t,showPath:n,separator:c}=e;if(!t)return null;const{value:d}=p;if(Array.isArray(d)){const b=[],{value:T}=F,{checkedKeys:D}=T.getCheckedKeys(d,{checkStrategy:e.checkStrategy,cascade:J.value,allowNotLoaded:e.allowCheckingNotLoaded}),{labelField:$}=e;return D.forEach(ie=>{const ne=T.getNode(ie);ne!==null&&b.push(n?Be(ne,T.getPath(ie).treeNodePath,c,$):Me(ne,$))}),b}return[]});function se(){var t;(t=l.value)===null||t===void 0||t.focus()}function Se(){var t;(t=l.value)===null||t===void 0||t.focusInput()}function _e(t){const{onUpdateShow:n,"onUpdate:show":c}=e;n&&z(n,t),c&&z(c,t),j.value=t}function H(t,n,c){const{onUpdateValue:d,"onUpdate:value":b}=e;d&&z(d,t,n,c),b&&z(b,t,n,c),N.value=t,P(),U()}function Qe(t,n){const{onUpdateIndeterminateKeys:c,"onUpdate:indeterminateKeys":d}=e;c&&z(c,t,n),d&&z(d,t,n)}function Xe(t,n,c){const{onUpdateExpandedKeys:d,"onUpdate:expandedKeys":b}=e;d&&z(d,t,n,c),b&&z(b,t,n,c),re.value=t}function xe(t){const{onFocus:n}=e;n&&n(t),M()}function Re(t){G();const{onBlur:n}=e;n&&n(t),i()}function G(){_e(!1)}function fe(){K.value||(O.value="",_e(!0),e.filterable&&Se())}function Je(){O.value=""}function Ye(t){var n;o.value&&(!((n=l.value)===null||n===void 0)&&n.$el.contains(Yt(t))||G())}function Ze(){K.value||(o.value?e.filterable||G():fe())}function Q(t){const{value:{getNode:n}}=F;return t.map(c=>{var d;return((d=n(c))===null||d===void 0?void 0:d.rawNode)||null})}function et(t,n,c){const d=Q(t),b=c.action==="check"?"select":"unselect",T=c.node;e.multiple?(H(t,d,{node:T,action:b}),e.filterable&&(Se(),e.clearFilterAfterSelect&&(O.value=""))):(t.length?H(t[0],d[0]||null,{node:T,action:b}):H(null,null,{node:T,action:b}),G(),se())}function tt(t){e.checkable&&Qe(t,Q(t))}function nt(t){var n;!((n=a.value)===null||n===void 0)&&n.contains(t.relatedTarget)||(L.value=!0,xe(t))}function at(t){var n;!((n=a.value)===null||n===void 0)&&n.contains(t.relatedTarget)||(L.value=!1,Re(t))}function ot(t){var n,c,d;!((n=a.value)===null||n===void 0)&&n.contains(t.relatedTarget)||!((d=(c=l.value)===null||c===void 0?void 0:c.$el)===null||d===void 0)&&d.contains(t.relatedTarget)||(L.value=!0,xe(t))}function lt(t){var n,c,d;!((n=a.value)===null||n===void 0)&&n.contains(t.relatedTarget)||!((d=(c=l.value)===null||c===void 0?void 0:c.$el)===null||d===void 0)&&d.contains(t.relatedTarget)||(L.value=!1,Re(t))}function rt(t){t.stopPropagation();const{multiple:n}=e;!n&&e.filterable&&G(),n?H([],[],{node:null,action:"clear"}):H(null,null,{node:null,action:"clear"})}function st(t){const{value:n}=p;if(Array.isArray(n)){const{value:c}=F,{checkedKeys:d}=c.getCheckedKeys(n,{cascade:J.value,allowNotLoaded:e.allowCheckingNotLoaded}),b=d.findIndex(T=>T===t.value);if(~b){const T=d[b],D=Q([T])[0];if(e.checkable){const{checkedKeys:$}=c.uncheck(t.value,d,{checkStrategy:e.checkStrategy,cascade:J.value,allowNotLoaded:e.allowCheckingNotLoaded});H($,Q($),{node:D,action:"delete"})}else{const $=Array.from(d);$.splice(b,1),H($,Q($),{node:D,action:"delete"})}}}}function it(t){const{value:n}=t.target;O.value=n}function ke(t){const{value:n}=r;return n?n.handleKeydown(t):{enterBehavior:null}}function dt(t){if(t.key==="Enter"){if(o.value){const{enterBehavior:n}=ke(t);if(!e.multiple)switch(n){case"default":case"toggleSelect":G(),se();break}}else fe();t.preventDefault()}else t.key==="Escape"?o.value&&(Zt(t),G(),se()):o.value?ke(t):t.key==="ArrowDown"&&fe()}function ut(){G(),se()}function ct(t){!Ee(t,"action")&&!Ee(t,"header")&&t.preventDefault()}const ft=k(()=>{const{renderTag:t}=e;if(t)return function({option:c,handleClose:d}){const{value:b}=c;if(b!==void 0){const T=F.value.getNode(b);if(T)return t({option:T.rawNode,handleClose:d})}return b}});je(sn,{pendingNodeKeyRef:E,dataTreeMate:F});function Ce(){var t;o.value&&((t=s.value)===null||t===void 0||t.syncPosition())}fn(a,Ce);const pt=ln(e),Te=k(()=>{if(e.checkable){const t=p.value;return e.multiple&&Array.isArray(t)?F.value.getCheckedKeys(t,{cascade:e.cascade,checkStrategy:pt.value,allowNotLoaded:e.allowCheckingNotLoaded}):{checkedKeys:Array.isArray(t)||t===null?[]:[t],indeterminateKeys:[]}}return{checkedKeys:[],indeterminateKeys:[]}}),vt={getCheckedData:()=>{const{checkedKeys:t}=Te.value;return{keys:t,options:Q(t)}},getIndeterminateData:()=>{const{indeterminateKeys:t}=Te.value;return{keys:t,options:Q(t)}},focus:()=>{var t;return(t=l.value)===null||t===void 0?void 0:t.focus()},focusInput:()=>{var t;return(t=l.value)===null||t===void 0?void 0:t.focusInput()},blur:()=>{var t;return(t=l.value)===null||t===void 0?void 0:t.blur()},blurInput:()=>{var t;return(t=l.value)===null||t===void 0?void 0:t.blurInput()}},pe=De("TreeSelect","-tree-select",En,kn,e,u),Pe=k(()=>{const{common:{cubicBezierEaseInOut:t},self:{menuBoxShadow:n,menuBorderRadius:c,menuColor:d,menuHeight:b,actionPadding:T,actionDividerColor:D,actionTextColor:$,headerDividerColor:ie,headerPadding:ne,headerTextColor:mt}}=pe.value;return{"--n-menu-box-shadow":n,"--n-menu-border-radius":c,"--n-menu-color":d,"--n-menu-height":b,"--n-bezier":t,"--n-action-padding":T,"--n-action-text-color":$,"--n-action-divider-color":D,"--n-header-padding":ne,"--n-header-text-color":mt,"--n-header-divider-color":ie}}),Y=f?Xt("tree-select",void 0,Pe,e):void 0,ht=k(()=>{const{self:{menuPadding:t}}=pe.value;return t});return Object.assign(Object.assign({},vt),{menuElRef:a,mergedStatus:A,triggerInstRef:l,followerInstRef:s,treeInstRef:r,mergedClsPrefix:u,mergedValue:p,mergedShow:o,namespace:h,adjustedTo:be(e),isMounted:Jt(),focused:L,menuPadding:ht,mergedPlaceholder:ze,mergedExpandedKeys:S,treeSelectedKeys:qe,treeCheckedKeys:we,mergedSize:g,mergedDisabled:K,selectedOption:We,selectedOptions:He,pattern:O,pendingNodeKey:E,mergedCascade:J,mergedFilter:C,selectionRenderTag:ft,handleTriggerOrMenuResize:Ce,doUpdateExpandedKeys:Xe,handleMenuLeave:Je,handleTriggerClick:Ze,handleMenuClickoutside:Ye,handleUpdateCheckedKeys:et,handleUpdateIndeterminateKeys:tt,handleTriggerFocus:nt,handleTriggerBlur:at,handleMenuFocusin:ot,handleMenuFocusout:lt,handleClear:rt,handleDeleteOption:st,handlePatternInput:it,handleKeydown:dt,handleTabOut:ut,handleMenuMousedown:ct,mergedTheme:pe,cssVars:f?void 0:Pe,themeClass:Y?.themeClass,onRender:Y?.onRender})},render(){const{mergedTheme:e,mergedClsPrefix:s,$slots:l}=this;return _("div",{class:`${s}-tree-select`},_(Vt,null,{default:()=>[_(Lt,null,{default:()=>_(dn,{ref:"triggerInstRef",onResize:this.handleTriggerOrMenuResize,status:this.mergedStatus,focused:this.focused,clsPrefix:s,theme:e.peers.InternalSelection,themeOverrides:e.peerOverrides.InternalSelection,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,renderTag:this.selectionRenderTag,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,size:this.mergedSize,bordered:this.bordered,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,active:this.mergedShow,loading:this.loading,multiple:this.multiple,maxTagCount:this.maxTagCount,showArrow:!0,filterable:this.filterable,clearable:this.clearable,pattern:this.pattern,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onBlur:this.handleTriggerBlur,onDeleteOption:this.handleDeleteOption,onKeydown:this.handleKeydown},{arrow:()=>{var r,a;return[(a=(r=this.$slots).arrow)===null||a===void 0?void 0:a.call(r)]}})}),_(Gt,{ref:"followerInstRef",show:this.mergedShow,placement:this.placement,to:this.adjustedTo,teleportDisabled:this.adjustedTo===be.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target"},{default:()=>_(zt,{name:"fade-in-scale-up-transition",appear:this.isMounted,onLeave:this.handleMenuLeave},{default:()=>{var r;if(!this.mergedShow)return null;const{mergedClsPrefix:a,checkable:u,multiple:h,menuProps:f,options:R}=this;return(r=this.onRender)===null||r===void 0||r.call(this),qt(_("div",Object.assign({},f,{class:[`${a}-tree-select-menu`,f?.class,this.themeClass],ref:"menuElRef",style:[f?.style||"",this.cssVars],tabindex:0,onMousedown:this.handleMenuMousedown,onKeydown:this.handleKeydown,onFocusin:this.handleMenuFocusin,onFocusout:this.handleMenuFocusout}),Fe(l.header,g=>g?_("div",{class:`${a}-tree-select-menu__header`,"data-header":!0},g):null),_(an,{ref:"treeInstRef",blockLine:!0,allowCheckingNotLoaded:this.allowCheckingNotLoaded,showIrrelevantNodes:!1,animated:!1,pattern:this.pattern,getChildren:this.getChildren,filter:this.mergedFilter,data:R,cancelable:h,labelField:this.labelField,keyField:this.keyField,disabledField:this.disabledField,childrenField:this.childrenField,theme:e.peers.Tree,themeOverrides:e.peerOverrides.Tree,defaultExpandAll:this.defaultExpandAll,defaultExpandedKeys:this.defaultExpandedKeys,indent:this.indent,expandedKeys:this.mergedExpandedKeys,checkedKeys:this.treeCheckedKeys,selectedKeys:this.treeSelectedKeys,checkable:u,checkStrategy:this.checkStrategy,cascade:this.mergedCascade,leafOnly:this.leafOnly,multiple:this.multiple,renderLabel:this.renderLabel,renderPrefix:this.renderPrefix,renderSuffix:this.renderSuffix,renderSwitcherIcon:this.renderSwitcherIcon,nodeProps:this.nodeProps,watchProps:this.watchProps,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,overrideDefaultNodeClickBehavior:this.overrideDefaultNodeClickBehavior,internalTreeSelect:!0,internalUnifySelectCheck:!0,internalScrollable:!0,internalScrollablePadding:this.menuPadding,internalFocusable:!1,internalCheckboxFocusable:!1,internalRenderEmpty:()=>_("div",{class:`${a}-tree-select-menu__empty`},Ht(l.empty,()=>[_(un,{theme:e.peers.Empty,themeOverrides:e.peerOverrides.Empty})])),onLoad:this.onLoad,onUpdateCheckedKeys:this.handleUpdateCheckedKeys,onUpdateIndeterminateKeys:this.handleUpdateIndeterminateKeys,onUpdateExpandedKeys:this.doUpdateExpandedKeys}),Fe(l.action,g=>g?_("div",{class:`${a}-tree-select-menu__action`,"data-action":!0},g):null),_(cn,{onFocus:this.handleTabOut})),[[Wt,this.handleMenuClickoutside,void 0,{capture:!0}]])}})})]}))}}),$e={getMenuTree:()=>ae.get("/permission/menu/tree"),getButtons:({parentId:e})=>ae.get(`/permission/button/${e}`),getComponents:()=>en.get("/components.json"),addPermission:e=>ae.post("/permission",e),savePermission:(e,s)=>ae.patch(`/permission/${e}`,s),deletePermission:e=>ae.delete(`permission/${e}`)},Bn=["/src/views/profile/index.vue","/src/views/pms/user/index.vue","/src/views/pms/role/role-user.vue","/src/views/pms/role/index.vue","/src/views/pms/resource/index.vue","/src/views/pms/resource/components/ResAddOrEdit.vue","/src/views/pms/resource/components/QuestionLabel.vue","/src/views/pms/resource/components/MenuTree.vue","/src/views/login/index.vue","/src/views/iframe/index.vue","/src/views/home/index.vue","/src/views/error-page/404.vue","/src/views/error-page/403.vue","/src/views/demo/upload/index.vue","/src/views/base/unocss.vue","/src/views/base/unocss-icon.vue","/src/views/base/test-modal.vue","/src/views/base/keep-alive.vue","/src/views/base/index.vue"],$n={__name:"ResAddOrEdit",props:{menus:{type:Array,required:!0}},emits:["refresh"],setup(e,{expose:s,emit:l}){const r=e,a=l,u=k(()=>[{name:"根菜单",id:"",children:r.menus||[]}]),h=Bn.map(w=>({label:w,value:w})),f=gt.map(w=>({label:()=>_("span",{class:"flex items-center"},[_("i",{class:`${w} text-18 mr-8`}),w]),value:w})),R=[{label:"跟随系统",value:""},{label:"简约-simple",value:"simple"},{label:"通用-normal",value:"normal"},{label:"全面-full",value:"full"},{label:"空白-empty",value:"empty"}],g={required:!0,message:"此为必填项",trigger:["blur","change"]},K={enable:!0,show:!0,layout:""},[A,i,U]=St(),[M,P]=tn(),N=I(""),x=I(!1);function p(w={}){const{action:o,row:O={},...C}=w;N.value=o,i.value={...K,...O},x.value=!!O.parentId&&O.type==="BUTTON",M.value.open({...C,onOk:j})}async function j(){await U(),P.value=!0;try{let w;i.value.parentId||(i.value.parentId=null),N.value==="add"?w=(await $e.addPermission(i.value)).data:N.value==="edit"&&await $e.savePermission(i.value.id,i.value),P.value=!1,$message.success("保存成功"),a("refresh",N.value==="add"?w:i.value)}catch(w){return console.error(w),P.value=!1,!1}}return s({handleOpen:p}),(w,o)=>{const O=Mn,C=On,F=gn,B=pn,E=mn,J=bn,re=Fn,ce=_t;return W(),q(v(nn),{ref_key:"modalRef",ref:M},{default:m(()=>[y(ce,{ref_key:"modalFormRef",ref:A,"label-placement":"left","require-mark-placement":"left","label-width":100,model:v(i)},{default:m(()=>[y(re,{cols:24,"x-gap":24},{default:m(()=>[y(C,{span:12,label:"所属菜单",path:"parentId"},{default:m(()=>[y(O,{value:v(i).parentId,"onUpdate:value":o[0]||(o[0]=S=>v(i).parentId=S),options:v(u),disabled:v(x),"label-field":"name","key-field":"id",placeholder:"根菜单",clearable:""},null,8,["value","options","disabled"])]),_:1}),y(C,{span:12,path:"name",rule:g},{label:m(()=>[y(V,{label:"名称",content:"标题"})]),default:m(()=>[y(F,{value:v(i).name,"onUpdate:value":o[1]||(o[1]=S=>v(i).name=S)},null,8,["value"])]),_:1}),y(C,{span:12,path:"code",rule:g},{label:m(()=>[y(V,{label:"编码",content:"如果是菜单则对应前端路由的name，使用大驼峰"})]),default:m(()=>[y(F,{value:v(i).code,"onUpdate:value":o[2]||(o[2]=S=>v(i).code=S)},null,8,["value"])]),_:1}),v(i).type==="MENU"?(W(),q(C,{key:0,span:12,path:"path",rule:{trigger:["blur","change"],type:"string",message:"必须是/、http、https开头",validator(S,L){return L?/\/|http|https/.test(L):!0}}},{label:m(()=>[y(V,{label:"路由地址",content:"父级菜单可不填"})]),default:m(()=>[y(F,{value:v(i).path,"onUpdate:value":o[3]||(o[3]=S=>v(i).path=S)},null,8,["value"])]),_:1},8,["rule"])):X("",!0),v(i).type==="MENU"?(W(),q(C,{key:1,span:12,path:"icon"},{label:m(()=>[y(V,{label:"菜单图标",content:"如material-symbols:help，图标库地址: https://icones.js.org/collection/all"})]),default:m(()=>[y(B,{value:v(i).icon,"onUpdate:value":o[4]||(o[4]=S=>v(i).icon=S),options:v(f),clearable:"",filterable:""},null,8,["value","options"])]),_:1})):X("",!0),v(i).type==="MENU"?(W(),q(C,{key:2,span:12,path:"layout"},{label:m(()=>[y(V,{label:"layout",content:"对应layouts文件夹下的目录名, 为空则默认为 default"})]),default:m(()=>[y(B,{value:v(i).layout,"onUpdate:value":o[5]||(o[5]=S=>v(i).layout=S),options:R,clearable:""},null,8,["value"])]),_:1})):X("",!0),v(i).type==="MENU"?(W(),q(C,{key:3,span:24,path:"component"},{label:m(()=>[y(V,{label:"组件路径",content:"前端组件的路径，以 /src 开头，父级菜单可不填"})]),default:m(()=>[y(B,{value:v(i).component,"onUpdate:value":o[6]||(o[6]=S=>v(i).component=S),options:v(h),clearable:"",filterable:"",tag:""},null,8,["value","options"])]),_:1})):X("",!0),v(i).type==="MENU"?(W(),q(C,{key:4,span:12,path:"show"},{label:m(()=>[y(V,{label:"显示状态",content:"控制是否在菜单栏显示，不影响路由注册"})]),default:m(()=>[y(E,{value:v(i).show,"onUpdate:value":o[7]||(o[7]=S=>v(i).show=S)},{checked:m(()=>[...o[11]||(o[11]=[Z(" 显示 ",-1)])]),unchecked:m(()=>[...o[12]||(o[12]=[Z(" 隐藏 ",-1)])]),_:1},8,["value"])]),_:1})):X("",!0),y(C,{span:12,path:"enable"},{label:m(()=>[y(V,{label:"状态",content:"如果是菜单，禁用后将不添加到路由表，无法进入此页面"})]),default:m(()=>[y(E,{value:v(i).enable,"onUpdate:value":o[8]||(o[8]=S=>v(i).enable=S)},{checked:m(()=>[...o[13]||(o[13]=[Z(" 启用 ",-1)])]),unchecked:m(()=>[...o[14]||(o[14]=[Z(" 禁用 ",-1)])]),_:1},8,["value"])]),_:1}),v(i).type==="MENU"?(W(),q(C,{key:5,span:12,path:"keepAlive"},{label:m(()=>[y(V,{label:"KeepAlive",content:"设置keepAlive需将组件的name设置成当前菜单的code"})]),default:m(()=>[y(E,{value:v(i).keepAlive,"onUpdate:value":o[9]||(o[9]=S=>v(i).keepAlive=S)},{checked:m(()=>[...o[15]||(o[15]=[Z(" 是 ",-1)])]),unchecked:m(()=>[...o[16]||(o[16]=[Z(" 否 ",-1)])]),_:1},8,["value"])]),_:1})):X("",!0),v(i).type==="MENU"?(W(),q(C,{key:6,span:12,label:"排序",path:"order",rule:{type:"number",required:!0,message:"此为必填项",trigger:["blur","change"]}},{default:m(()=>[y(J,{value:v(i).order,"onUpdate:value":o[10]||(o[10]=S=>v(i).order=S)},null,8,["value"])]),_:1})):X("",!0)]),_:1})]),_:1},8,["model"])]),_:1},512)}}},Qn=Object.freeze(Object.defineProperty({__proto__:null,default:$n},Symbol.toStringTag,{value:"Module"}));export{Qn as R,$n as _,$e as a};
